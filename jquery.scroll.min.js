(function(b,f){var h={init:function(a,c){var d=b.extend({},b.fn.scrollbar.defaults,c);return this.each(function(){var c=b(this),g={arrows:d.arrows};d.containerHeight!="auto"&&c.height(d.containerHeight);g.containerHeight=c.height();g.contentHeight=b.fn.scrollbar.contentHeight(c);if(g.contentHeight<=g.containerHeight)return!0;this.scrollbar=new b.fn.scrollbar.Scrollbar(c,g,d);this.scrollbar.buildHtml().setHandle().appendEvents();typeof a==="function"&&a(c.find(".scrollbar-pane"),this.scrollbar)})},
repaint:function(){return this.each(function(){this.scrollbar?this.scrollbar.repaint():b(this).scrollbar()})},scrollto:function(a,c,b){c=c||!1;b=b||!1;return this.each(function(){this.scrollbar&&this.scrollbar.scrollto(a,c,b)})},unscrollbar:function(){return this.each(function(){this.scrollbar&&this.scrollbar.unscrollbar()})}};b.fn.scrollbar=function(a){if(h[a])return h[a].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof a==="function"||a===void 0)return h.init.apply(this,arguments);
else if(typeof a==="object")return h.init.apply(this,[null,a]);else b.error("method '"+a+"' does not exist for $.fn.scrollbar")};b.fn.scrollbar.defaults={containerHeight:"auto",arrows:!0,handleHeight:"auto",handleMinHeight:30,scrollTimeout:50,scrollStep:20,scrollTimeoutArrows:40,scrollStepArrows:3};b.fn.scrollbar.Scrollbar=function(a,b,d){this.container=a;this.props=b;this.opts=d;this.mouse={};this.props.arrows=this.container.hasClass("no-arrows")?!1:this.props.arrows};b.fn.scrollbar.Scrollbar.prototype=
{buildHtml:function(){this.container.wrapInner('<div class="scrollbar-pane"/>');this.container.append('<div class="scrollbar-handle-container"><div class="scrollbar-handle"/></div>');this.props.arrows&&this.container.append('<div class="scrollbar-handle-up"/>').append('<div class="scrollbar-handle-down"/>');var a=this.container.height();this.pane=this.container.find(".scrollbar-pane");this.handle=this.container.find(".scrollbar-handle");this.handleContainer=this.container.find(".scrollbar-handle-container");
this.handleArrows=this.container.find(".scrollbar-handle-up, .scrollbar-handle-down");this.handleArrowUp=this.container.find(".scrollbar-handle-up");this.handleArrowDown=this.container.find(".scrollbar-handle-down");this.pane.defaultCss({top:0,left:0});this.handleContainer.defaultCss({right:0});this.handle.defaultCss({top:0,right:0});this.handleArrows.defaultCss({right:0});this.handleArrowUp.defaultCss({top:0});this.handleArrowDown.defaultCss({bottom:0});this.container.css({position:this.container.css("position")===
"absolute"?"absolute":"relative",overflow:"hidden",height:a});this.pane.css({position:"absolute",overflow:"visible",height:"auto"});this.handleContainer.css({position:"absolute",top:this.handleArrowUp.outerHeight(!0),height:this.props.containerHeight-this.handleArrowUp.outerHeight(!0)-this.handleArrowDown.outerHeight(!0)+"px"});this.handle.css({position:"absolute",cursor:"pointer"});this.handleArrows.css({position:"absolute",cursor:"pointer"});this.pane.top=0;return this},setHandle:function(){this.props.handleContainerHeight=
this.handleContainer.height();this.props.contentHeight=this.pane.height();this.props.handleHeight=this.opts.handleHeight=="auto"?Math.max(Math.ceil(this.props.containerHeight*this.props.handleContainerHeight/this.props.contentHeight),this.opts.handleMinHeight):this.opts.handleHeight;this.handle.height(this.props.handleHeight);this.handle.height(2*this.handle.height()-this.handle.outerHeight(!0));this.props.handlePosition={min:0,max:this.props.handleContainerHeight-this.props.handleHeight};this.props.handleContentRatio=
(this.props.contentHeight-this.props.containerHeight)/(this.props.handleContainerHeight-this.props.handleHeight);this.handle.top=this.handle.top==void 0?0:-1*this.pane.top/this.props.handleContentRatio;return this},appendEvents:function(){var a=this;this.handle.bind("mousedown.handle",b.proxy(this,"startOfHandleMove"));this.handleContainer.bind("mousedown.handle",b.proxy(this,"onHandleContainerMousedown"));this.handleContainer.bind("mouseenter.container mouseleave.container",b.proxy(this,"onHandleContainerHover"));
this.handleArrows.bind("mousedown.arrows",b.proxy(this,"onArrowsMousedown"));this.container.bind("mousewheel.container",b.proxy(this,"onMouseWheel"));this.container.bind("mouseenter.container mouseleave.container",b.proxy(this,"onContentHover"));b(f).bind("keydown",function(c){if(a.container.hasClass("focused")||a.container.hasClass("hover"))switch(c.keyCode){case 38:c.preventDefault();a.handle.direction=-1;a.handle.step=a.opts.scrollStepArrows;setTimeout(b.proxy(a.moveHandle,a),a.opts.scrollTimeoutArrows);
break;case 40:c.preventDefault();a.handle.direction=1;a.handle.step=a.opts.scrollStepArrows;setTimeout(b.proxy(a.moveHandle,a),a.opts.scrollTimeoutArrows);break;case 33:c.preventDefault();a.handle.direction=-1;a.handle.step=a.opts.scrollStepArrows*15;setTimeout(b.proxy(a.moveHandle,a),a.opts.scrollTimeoutArrows);break;case 34:c.preventDefault(),a.handle.direction=1,a.handle.step=a.opts.scrollStepArrows*15,setTimeout(b.proxy(a.moveHandle,a),a.opts.scrollTimeoutArrows)}});this.handle.bind("click.scrollbar",
this.preventClickBubbling);this.handleContainer.bind("click.scrollbar",this.preventClickBubbling);this.handleArrows.bind("click.scrollbar",this.preventClickBubbling);return this},mousePosition:function(a){return a.pageY||a.clientY+(f.documentElement.scrollTop||f.body.scrollTop)||0},repaint:function(){this.pane.height()<=this.props.containerHeight?this.unscrollbar():(this.setHandle(),this.setHandlePosition())},scrollto:function(a,c,d){var e=0;if(typeof a=="number")e=(a<0?0:a)/this.props.handleContentRatio;
else if(typeof a=="string"){if(a=="bottom")e=this.props.handlePosition.max;a=="middle"&&(e=Math.ceil(this.props.handlePosition.max/2))}else typeof a=="object"&&!b.isPlainObject(a)&&(e=Math.ceil(a.position().top/this.props.handleContentRatio));this.handle.top=e;this.setHandlePosition(c,d);this.setContentPosition(c,d)},unscrollbar:function(){var a=this.container.find(".scrollbar-pane");a.css("height",a.data("originalHeight")||"auto");a.html()!==null&&(this.container.empty(),this.container.append(a.html()),
this.container.attr("style",""))},startOfHandleMove:function(a){a.preventDefault();a.stopPropagation();this.mouse.start=this.mousePosition(a);this.handle.start=this.handle.top;b(f).bind("mousemove.handle",b.proxy(this,"onHandleMove")).bind("mouseup.handle",b.proxy(this,"endOfHandleMove"));this.handle.addClass("move");this.handleContainer.addClass("move")},onHandleMove:function(a){a.preventDefault();this.handle.top=this.handle.start+(this.mousePosition(a)-this.mouse.start);this.setHandlePosition();
this.setContentPosition()},endOfHandleMove:function(){b(f).unbind(".handle");this.handle.removeClass("move");this.handleContainer.removeClass("move")},setHandlePosition:function(a,c){a=a||!1;c=c?b.fn.easing?c:"swing":!1;this.handle.top=this.handle.top>this.props.handlePosition.max?this.props.handlePosition.max:this.handle.top;this.handle.top=this.handle.top<this.props.handlePosition.min?this.props.handlePosition.min:this.handle.top;a&&!isNaN(a)?this.handle.stop().animate({top:this.handle.top+"px"},
a,c):this.handle[0].style.top=this.handle.top+"px"},setContentPosition:function(a,c){a=a||!1;c=c?b.fn.easing?c:"swing":!1;this.pane.top=-1*this.props.handleContentRatio*this.handle.top;a&&!isNaN(a)?this.pane.stop().animate({top:this.pane.top+"px"},a,c):this.pane[0].style.top=this.pane.top+"px";this.container.trigger("scrolled")},onMouseWheel:function(a,b){if(this.container.hasClass("focused")||this.container.hasClass("hover"))b*=2.5,this.handle.top-=6*b,this.setHandlePosition(),this.setContentPosition(),
this.handle.top>this.props.handlePosition.min&&this.handle.top<this.props.handlePosition.max&&a.preventDefault()},onHandleContainerMousedown:function(a){a.preventDefault();if(!b(a.target).hasClass("scrollbar-handle-container"))return!1;this.handle.direction=this.handle.offset().top<this.mousePosition(a)?1:-1;this.handle.step=this.opts.scrollStep;var c=this;b(f).bind("mouseup.handlecontainer",function(){clearInterval(d);c.handle.unbind("mouseenter.handlecontainer");b(f).unbind("mouseup.handlecontainer")});
this.handle.bind("mouseenter.handlecontainer",function(){clearInterval(d)});var d=setInterval(b.proxy(this.moveHandle,this),this.opts.scrollTimeout)},onArrowsMousedown:function(a){a.preventDefault();this.handle.direction=b(a.target).hasClass("scrollbar-handle-up")?-1:1;this.handle.step=this.opts.scrollStepArrows;b(a.target).addClass("move");var c=setInterval(b.proxy(this.moveHandle,this),this.opts.scrollTimeoutArrows);b(f).one("mouseup.arrows",function(){clearInterval(c);b(a.target).removeClass("move")})},
moveHandle:function(){this.handle.top=this.handle.direction===1?Math.min(this.handle.top+this.handle.step,this.props.handlePosition.max):Math.max(this.handle.top-this.handle.step,this.props.handlePosition.min);this.handle[0].style.top=this.handle.top+"px";this.setContentPosition();this.container.trigger("scrolled")},onContentHover:function(a){a.type==="mouseenter"?(this.container.addClass("hover"),this.handleContainer.addClass("hover"),this.container.closest("div.scrollbar-pane").each(function(){b(this).parent().removeClass("hover focused")})):
(this.container.removeClass("hover"),this.handleContainer.removeClass("hover"),this.container.closest("div.scrollbar-pane").each(function(){b(this).parent().addClass("hover focused")}))},onHandleContainerHover:function(a){a.type==="mouseenter"?this.handleArrows.addClass("hover"):this.handleArrows.removeClass("hover")},preventClickBubbling:function(a){a.stopPropagation()}};b.fn.scrollbar.contentHeight=function(a){var a=a.wrapInner('<div style="zoom:1"/>').find(":first"),b=a.css({overflow:"hidden"}).height();
a.replaceWith(a.contents());return b};b.fn.defaultCss=function(a){var c={right:"auto",left:"auto",top:"auto",bottom:"auto",position:"static"};return this.each(function(){var d=b(this),e;for(e in a)d.css(e)===c[e]&&d.css(e,a[e])})};b.event.special.mousewheel={setup:function(){this.addEventListener?(this.addEventListener("mousewheel",b.fn.scrollbar.mouseWheelHandler,!1),this.addEventListener("DOMMouseScroll",b.fn.scrollbar.mouseWheelHandler,!1)):this.onmousewheel=b.fn.scrollbar.mouseWheelHandler},teardown:function(){this.removeEventListener?
(this.removeEventListener("mousewheel",b.fn.scrollbar.mouseWheelHandler,!1),this.removeEventListener("DOMMouseScroll",b.fn.scrollbar.mouseWheelHandler,!1)):this.onmousewheel=null}};b.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}});b.fn.scrollbar.mouseWheelHandler=function(a){var c=a||window.event,d=[].slice.call(arguments,1),e=0,g=0,f=0,a=b.event.fix(c);a.type="mousewheel";c.wheelDelta&&
(e=c.wheelDelta/120);c.detail&&(e=-c.detail/3);f=e;c.axis!==void 0&&c.axis===c.HORIZONTAL_AXIS&&(f=0,g=-1*e);c.wheelDeltaY!==void 0&&(f=c.wheelDeltaY/120);c.wheelDeltaX!==void 0&&(g=-1*c.wheelDeltaX/120);d.unshift(a,e,g,f);return b.event.handle.apply(this,d)}})(jQuery,document);
